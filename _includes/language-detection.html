{% comment %}
  Language Detection for GitFichas - Variables only, no UI
  Usage: {% include language-detection.html %}
{% endcomment %}

{% assign current_lang = site.default_language %}

{% if page.lang %}
  {% for lang_pair in site.languages %}
    {% assign lang_code = lang_pair[0] %}
    {% assign lang_config = lang_pair[1] %}
    {% if page.lang == lang_code or page.lang == lang_config.locale %}
      {% assign current_lang = lang_code %}
      {% break %}
    {% endif %}
  {% endfor %}
{% endif %}

{% if post.lang %}
  {% for lang_pair in site.languages %}
    {% assign lang_code = lang_pair[0] %}
    {% assign lang_config = lang_pair[1] %}
    {% if post.lang == lang_code or post.lang == lang_config.locale %}
      {% assign current_lang = lang_code %}
      {% break %}
    {% endif %}
  {% endfor %}
{% endif %}

{% assign current_lang_config = site.languages[current_lang] %}
{% assign available_languages = site.languages %}